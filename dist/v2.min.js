/**
 * @author Stefan Goessner (c) 2013-2021
 * @license MIT Licence (MIT)
 */
"use strict";function v2(v,y=undefined){if(Object.getPrototypeOf(v)===v2.prototype)return v;else if(typeof v==="object"){const{x:x,y:y,r:r,w:w,cw:cw,sw:sw,...rest}=v;let X=0,Y=0;if(x!==undefined&&y!==undefined){X=x;Y=y}else if(r!==undefined&&w!==undefined){X=r*Math.cos(w);Y=r*Math.sin(w)}else if(r!==undefined&&cw!==undefined&&sw!==undefined){X=r*cw;Y=r*sw}else if(r!==undefined){X=r;Y=0}else if(w!==undefined){X=Math.cos(w);Y=Math.sin(w)}else if(x!==undefined){X=x;Y=0}else if(y!==undefined){X=0;Y=y}return v2.create({x:X,y:Y,...rest})}else if(typeof v==="number"&&typeof y==="number")return v2.create({x:v,y:y});else return v2.create({x:0,y:0})}v2.prototype={set(v){this.x=v.x;this.y=v.y;return this},get isZero(){return Math.abs(this.x)<Number.EPSILON&&Math.abs(this.y)<Number.EPSILON},get r(){return Math.hypot(this.x,this.y)},set r(q){const r=Math.hypot(this.x,this.y);this.x*=q/r;this.y*=q/r},get w(){return Math.atan2(this.y,this.x)},set w(q){const r=Math.hypot(this.x,this.y);this.x=r*Math.cos(q);this.y=r*Math.sin(q)},get cpy(){return v2.create({x:this.x,y:this.y})},get sqr(){return this.x**2+this.y**2},get tilde(){return v2.create({x:-this.y,y:this.x})},get ort(){return v2.create({x:-this.y,y:this.x})},get neg(){return v2.create({x:-this.x,y:-this.y})},get unit(){const r=Math.hypot(this.x,this.y);return v2.create({x:this.x/r,y:this.y/r})},set unit(u){const r=Math.hypot(this.x,this.y);this.x=u.x*r;this.y=u.y*r},get inv(){const rr=this.x**2+this.y**2;return v2.create({x:this.x/rr,y:this.y/rr})},get plain(){return{x:this.x,y:this.y}},freeze(){return Object.freeze(this)},equals(v){return Math.abs(this.x-v.x)<Number.EPSILON&&Math.abs(this.y-v.y)<Number.EPSILON},dot(v){return this.x*v.x+this.y*v.y},symp(v){return this.x*v.y-this.y*v.x},add(v){return v2.create({x:this.x+v.x,y:this.y+v.y})},sub(v){return v2.create({x:this.x-v.x,y:this.y-v.y})},scl(s=1){return v2.create({x:this.x*s,y:this.y*s})},rot(w=0){let cw=Math.cos(w),sw=Math.sin(w);return v2.create({x:cw*this.x-sw*this.y,y:sw*this.x+cw*this.y})},simtrf(lam=1,mu=0){return v2.create({x:lam*this.x-mu*this.y,y:lam*this.y+mu*this.x})},itilde(){let x=-this.y;this.y=this.x;this.x=x;return this},ineg(){this.x=-this.x;this.y=-this.y;return this},iunit(){const r=Math.hypot(this.x,this.y);if(r){this.x/=r;this.y/=r}return this},iinv(){const rr=this.x**2+this.y**2;if(rr){this.x/=rr;this.y/=rr}return this},irot(w=0){const cw=Math.cos(w),sw=Math.sin(w),x=this.cx*cw-this.sy*sw;this.y=this.x*sw+this.y*cw;this.x=x;return this},icpy(v){this.x=v.x;this.y=v.y;return this},iscl(s=1){this.x*=s;this.y*=s;return this},iadd(v){this.x+=v.x;this.y+=v.y;return this},isub(v){this.x-=v.x;this.y-=v.y;return this},isimtrf(lam=1,mu=0){const x=lam*this.x-mu*this.y;this.y=lam*this.y+mu*this.x;this.x=x;return this},cstrLen(v,ratio=1){return this.scl(Math.hypot(v.x,v.y)/Math.hypot(this.x,this.y)*ratio)},cstrAng(v,w=0){const ux=this.x-v.x,uy=this.y-v.y,r=Math.hypot(ux,uy);this.x=v.x+r*Math.cos(w);this.y=v.y+r*Math.sin(w);return this},toString(){return`{x:${this.x},y:${this.y},r:${this.r},w:${180/Math.PI*this.w}}`}};v2.prototype.perp=v2.prototype.symp;v2.create=function create(v){return Object.create(v2.prototype,Object.getOwnPropertyDescriptors(v))};v2.zero=v2.create({x:0,y:0}).freeze();v2.xunit=v2.create({x:1,y:0}).freeze();v2.yunit=v2.create({x:0,y:1}).freeze();v2.cpy=function(v){return v2.create({x:v.x,y:v.y})};v2.sqr=function(v){return v.x**2+v.y**2};v2.tilde=function(v){return v2.create({x:-v.y,y:v.x})};v2.neg=function(v){return v2.create({x:-v.x,y:-v.y})};v2.unit=function(v){const r=Math.hypot(v.x,v.y);return v2.create({x:v.x/r,y:v.y/r})};v2.inv=function(v){const rr=this.x**2+this.y**2;return v2.create({x:v.x/rr,y:v.y/rr})};v2.equals=function(a,b){return Math.abs(a.x-b.x)<Number.EPSILON&&Math.abs(a.y-b.y)<Number.EPSILON};v2.dot=function(a,b){return a.x*b.x+a.y*b.y};v2.symp=function(a,b){return a.x*b.y-a.y*b.x};v2.sum=function(a,b){return v2({x:a.x+b.x,y:a.y+b.y})};v2.dif=function(a,b){return v2({x:a.x-b.x,y:a.y-b.y})};v2.scl=function(v,s=1){return v2({x:s*v,y:s*v.y})};v2.rot=function(v,w=0){const cw=Math.cos(w),sw=Math.sin(w);return v2({x:cw*v.x-sw*v.y,y:sw*v.x+cw*v.y})};v2.simtrf=function(v,lam=1,mu=0){return v2.create({x:lam*v.x-mu*v.y,y:lam*v.y+mu*v.x})},v2.ref=function(v){return v2.create({get x(){return v.x},get y(){return v.y},set x(q){v.x=q},set y(q){v.y=q}})};v2.case1=function case1(a,b,c){a.x=b.x+c.x;a.y=b.y+c.y};v2.case2=function case2(a,b,c,sgn){const ea=a.unit,sqr=b.sqr-ea.symp(c)**2;a.r=ea.dot(c)+(sgn||1)*Math.sqrt(sqr>0?sqr:0);b.set(a.sub(c))};v2.case3=function case3(a,b,c){const ea=a.unit,eb=b.unit,den=ea.symp(eb);a.r=c.symp(eb)/den;b.r=c.symp(ea)/den};v2.case4=function case4(a,b,c,sgn){const aa_cc=a.sqr/cc,lam=(aa_cc-b.sqr/cc+1)/2,sqr=aa_cc-lam*lam,mu=sqr>0?(sgn||1)*Math.sqrt(sqr):0;a.set(c.simtrf(lam,mu));b.set(c.simtrf(lam-1,mu))};v2.case5=function case5(a,b,c,sgn){const ar=(sgn||1)*Math.sqrt(c.sqr-b.sqr);a.set(c.simtrf(ar,b.r).scl(ar/c.sqr));b.unit=a.unit.tilde};if(typeof module!=="undefined")module.exports=v2;